{{extend 'layout.html'}}
  
{{block head}}
	<link rel="stylesheet" href="{{=URL('static', 'css/smydp_inventarios.css')}}"> 
{{end}}

{{block center}}

<!-- Breadcrumb de navegación -->
<nav class="navbar navbar-inverse navbar-fixed-top breadcrumbs">
  <div class="breadcrumb">
  <a class="breadcrumb-item" href="{{=URL('..', 'sigulab2')}}">Inicio</a>
  <a class="breadcrumb-item" href="{{=URL('..', 'sigulab2', 'smydp')}}">SMyDP</a>
  <a class="breadcrumb-item" href="{{=URL('..', 'sigulab2', 'smydp/Sustancias')}}">Sustancias</a>
  <span class="breadcrumb-item active">Inventario</span>
  </div>
</nav>
<!-- Fin del Breadcrumb de navegación --> 


	<div class="container">
		<div id="fila1" class="row">
		</div>
		<!-- PASAR LO QUE SE PUEDA AL CONTROLADOR -->
		{{ n = len(dependencias) }}
		{{ filas = n//4 if n%4 == 0 else n//4+1 }}
		{{ k = 0 }}
		{{ while k < filas:}}
			<div id="fila2" class="row">
				<div class="col-xs-3 col-sm-1"></div>
				<div class="col-xs-6 col-sm-10">
					<!-- El primer elemento siempre va a ir, pues si existe su fila es porque tiene al menos un elemento -->
					<div id="{{=dependencias[4*k].id}}" class="col-sm-3 columnas" onclick="postDependencia(this.id);">
						<div class="dependencia">{{=dependencias[4*k].nombre}}</div>
					</div>
					{{ if 4*k+1 < n: }}
					<div id="{{=dependencias[4*k+1].id}}" class="col-sm-3 columnas" onclick="postDependencia(this.id);">
						<div  class="dependencia">{{=dependencias[4*k+1].nombre}}</div>
					</div>
					{{pass}}
					{{ if 4*k+2 < n: }}
					<div id="{{=dependencias[4*k+2].id}}" class="col-sm-3 columnas" onclick="postDependencia(this.id);">
						<div  class="dependencia">{{=dependencias[4*k+2].nombre}}</div>
					</div>
					{{ pass }}
					{{ if 4*k+3 < n: }}
					<div id="{{=dependencias[4*k+3].id}}" class="col-sm-3 columnas" onclick="postDependencia(this.id);">
						<div  class="dependencia">{{=dependencias[4*k+3].nombre}}</div>
					</div>
					{{ pass }}
				</div>
				<div class="col-xs-3 col-sm-1"></div>
			</div>
			{{k=k+1}}
		{{pass}}
	</div>

<form id="depForm" action="{{=URL('inventarios')}}" method="post">
	<!-- Almacena el ID de la dependencia seleccionada para pasarlo por POST -->
	<input type="hidden" id="dephidden" name="dependencia" value="">
</form>

<script>
  // Set blue bar below INICIO text.
  document.getElementById("smydp").className += " active";

  // Llama al controlador inventarios nuevamente, pero en este caso
  // envia por POST el id del espacio fisico seleccionado
  function postDependencia(depid){
  	var x = document.getElementById("dephidden");
    x.value = depid;

    document.getElementById("depForm").submit();
  	
  }

</script>
{{end}}